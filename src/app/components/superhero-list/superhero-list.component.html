<mat-card>
	<mat-card-header>
		<mat-card-title>Superhero List</mat-card-title>
	</mat-card-header>

	<mat-card-content>
		<div class="mb-4">
			<mat-form-field>
				<mat-label>Search by name</mat-label>
				<input matInput [(ngModel)]="searchTerm" (input)="filterSuperheroes()">
			</mat-form-field>
		</div>

		<div class="overflow-x-auto">
			<table mat-table [dataSource]="paginatedSuperheroes" class="w-full">
				<ng-container matColumnDef="id">
					<th mat-header-cell *matHeaderCellDef>id</th>
					<td mat-cell *matCellDef="let hero">
						<span class="bg-indigo-100 px-4 py-1 rounded-full">
							{{ hero.id }}
						</span>
					</td>
				</ng-container>

				<ng-container matColumnDef="name">
					<th mat-header-cell *matHeaderCellDef>Name</th>
					<td mat-cell *matCellDef="let hero">{{ hero.name }}</td>
				</ng-container>

				<ng-container matColumnDef="description">
					<th mat-header-cell *matHeaderCellDef>Description</th>
					<td mat-cell *matCellDef="let hero">{{ hero.description }}</td>
				</ng-container>

				<ng-container matColumnDef="actions">
					<th mat-header-cell *matHeaderCellDef>Actions</th>
					<td mat-cell *matCellDef="let hero">
						<div class="flex gap-6">
							<button mat-icon-button color="primary" (click)="handleEdit(hero)" aria-label="Edit">
								<mat-icon>edit</mat-icon>
							</button>

							<button mat-icon-button color="warn" (click)="showDeleteConfirm(hero)" aria-label="Delete">
								<mat-icon>delete</mat-icon>
							</button>
						</div>
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="['id', 'name', 'description', 'actions']"></tr>
				<tr mat-row *matRowDef="let row; columns: ['id', 'name', 'description', 'actions'];"></tr>
			</table>
		</div>

		<div class="mt-4 text-center">
			<mat-paginator [length]="filteredSuperheroes.length" [pageSize]="itemsPerPage"
				[pageSizeOptions]="[5, 10, 25, 100]" (page)="handlePageChange($event)">
			</mat-paginator>
		</div>

		<div class="mt-4 text-right">
			<button mat-raised-button color="accent" (click)="handleAdd()">Add Superhero</button>
		</div>
	</mat-card-content>
</mat-card>

@if(openModal) {
<modal-superhero [hero]="selectedHero" [type]="openModalEdit ? 'edit' : 'add'" (heroAdded)="onHeroAdded($event)"
	(heroEdited)="onHeroEdited($event)" (close)="openModal = false">
</modal-superhero>
}

@if(showConfirm) {
<ui-confirm [title]="'Delete Superhero: ' + selectedHero?.name"
	[text]="'Are you sure you want to delete this superhero? This action cannot be undone.'"
	(close)="showConfirm = false" (confirm)="handleDelete(selectedHero)">
</ui-confirm>
}